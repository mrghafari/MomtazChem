<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Shipment Weight Display - ØªØ³Øª Ù†Ù…Ø§ÛŒØ´ ÙˆØ²Ù† Ù…Ø­Ù…ÙˆÙ„Ù‡</title>
    <style>
        body {
            font-family: Tahoma, Arial, sans-serif;
            direction: rtl;
            text-align: right;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .form-section {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            background: #fafafa;
        }
        .delivery-method-section {
            border-top: 2px solid #ddd;
            padding-top: 15px;
            margin-top: 15px;
        }
        .delivery-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .weight-display {
            font-size: 14px;
            color: #666;
            background: #f0f0f0;
            padding: 6px 12px;
            border-radius: 6px;
            border: 1px solid #ddd;
        }
        .weight-display .weight-value {
            font-weight: bold;
            color: #333;
        }
        .cart-item {
            border: 1px solid #eee;
            border-radius: 6px;
            padding: 10px;
            margin: 8px 0;
            background: white;
        }
        .cart-summary {
            background: #f8f9ff;
            border: 1px solid #d0d7ff;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        .weight-calculation {
            background: #e6f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 6px;
            padding: 10px;
            margin: 10px 0;
            font-size: 12px;
        }
        select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            font-size: 14px;
        }
        .product-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .product-row:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ØªØ³Øª Ù†Ù…Ø§ÛŒØ´ ÙˆØ²Ù† Ù…Ø­Ù…ÙˆÙ„Ù‡ Ø¯Ø± Ú©Ø§Ø±Øª Ø®Ø±ÛŒØ¯</h1>
        <p>Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ù†Ù…Ø§ÛŒØ´ ÙˆØ²Ù† Ù…Ø­Ù…ÙˆÙ„Ù‡ Ø¯Ø± Ú©Ù†Ø§Ø± Delivery Method Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
        
        <!-- Cart Items Simulation -->
        <div class="form-section">
            <h3>ğŸ›’ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¯Ø± Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h3>
            <div id="cart-items">
                <!-- Cart items will be populated by JavaScript -->
            </div>
        </div>
        
        <!-- Weight Calculation Details -->
        <div class="weight-calculation">
            <h4>ğŸ“Š Ø¬Ø²Ø¦ÛŒØ§Øª Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙˆØ²Ù†:</h4>
            <div id="weight-breakdown">
                <!-- Weight breakdown will be populated by JavaScript -->
            </div>
        </div>
        
        <!-- Cart Summary with Delivery Method -->
        <div class="cart-summary">
            <h3>ğŸ’° Ø®Ù„Ø§ØµÙ‡ Ø³ÙØ§Ø±Ø´</h3>
            
            <!-- Total without shipping -->
            <div class="product-row" style="font-weight: bold; border-top: 2px solid #ccc; margin-top: 10px; padding-top: 10px;">
                <span>Ù…Ø¬Ù…ÙˆØ¹ (Ø¨Ø¯ÙˆÙ† Ù‡Ø²ÛŒÙ†Ù‡ Ø­Ù…Ù„)</span>
                <span id="subtotal">0 IQD</span>
            </div>
            
            <!-- Delivery Method Selection with Weight Display -->
            <div class="delivery-method-section">
                <div class="delivery-header">
                    <label style="font-weight: bold; font-size: 14px;">Delivery Method *</label>
                    <div class="weight-display">
                        âš–ï¸ ÙˆØ²Ù† Ù…Ø­Ù…ÙˆÙ„Ù‡: <span class="weight-value" id="total-weight">0.00 Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</span>
                    </div>
                </div>
                
                <select id="delivery-method">
                    <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ø±ÙˆØ´ Ø§Ø±Ø³Ø§Ù„</option>
                    <option value="smart_vehicle" style="background-color: #d1fae5; color: #047857;">ğŸšš Ø§Ù†ØªØ®Ø§Ø¨ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø®ÙˆØ¯Ø±Ùˆ - Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ù‡ØªØ±ÛŒÙ† Ú¯Ø²ÛŒÙ†Ù‡</option>
                    <option value="self_pickup" style="background-color: #dbeafe; color: #1d4ed8;">ğŸš¶â€â™‚ï¸ Ø­Ù…Ù„ ØªÙˆØ³Ø· Ø®ÙˆØ¯Ù… - Ø±Ø§ÛŒÚ¯Ø§Ù†</option>
                    <option value="standard">ğŸš› Ø§Ø±Ø³Ø§Ù„ Ø¹Ø§Ø¯ÛŒ - 5000 IQD</option>
                </select>
                
                <!-- Delivery Method Information -->
                <div id="delivery-info" style="margin-top: 10px; padding: 10px; background: #f0f8ff; border: 1px solid #b3d9ff; border-radius: 6px; display: none;">
                    <!-- Delivery info will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Final Total -->
            <div class="product-row" style="font-weight: bold; font-size: 16px; border-top: 2px solid #333; margin-top: 15px; padding-top: 10px;">
                <span>Ù…Ø¬Ù…ÙˆØ¹ Ù†Ù‡Ø§ÛŒÛŒ</span>
                <span id="final-total">0 IQD</span>
            </div>
        </div>
        
        <!-- Test Results -->
        <div style="margin-top: 20px; padding: 15px; background: #e6f3ff; border-radius: 8px;">
            <h4>ğŸ“ Ù†ØªØ§ÛŒØ¬ ØªØ³Øª:</h4>
            <p><strong>âœ… ÙˆØ²Ù† Ù…Ø­Ù…ÙˆÙ„Ù‡:</strong> Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ú©Ù†Ø§Ø± "Delivery Method *" Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯</p>
            <p><strong>âœ… Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯ÛŒÙ†Ø§Ù…ÛŒÚ©:</strong> ÙˆØ²Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ø§ ØªØºÛŒÛŒØ± Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´ÙˆØ¯</p>
            <p><strong>âœ… Ø·Ø±Ø§Ø­ÛŒ Ø¨ØµØ±ÛŒ:</strong> ÙˆØ²Ù† Ø¯Ø± ÛŒÚ© badge Ø®Ø§Ú©Ø³ØªØ±ÛŒ Ø¨Ø§ Ù…ØªÙ† bold Ù†Ù…Ø§ÛŒØ´ ÛŒØ§Ø¨Ø¯</p>
            <p><strong>âœ… ÙˆØ§Ø­Ø¯ Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÚ¯ÛŒØ±ÛŒ:</strong> ÙˆØ²Ù† Ø¨Ù‡ Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù… Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯</p>
        </div>
    </div>

    <script>
        // Sample cart data with weights
        const cartItems = [
            {
                id: 470,
                name: "Solvant 402",
                nameAr: "Ø­Ù„Ø§Ù„ 402",
                price: 25.50,
                quantity: 2,
                weight: 11.0 // kg
            },
            {
                id: 471,
                name: "Paint Thinner PT-300",
                nameAr: "ØªÛŒÙ†Ø± Ø±Ù†Ú¯ PT-300",
                price: 18.75,
                quantity: 1,
                weight: 11.01 // kg
            },
            {
                id: 472,
                name: "NPK Fertilizer Complex",
                nameAr: "Ú©ÙˆØ¯ NPK Ù…Ø±Ú©Ø¨",
                price: 32.00,
                quantity: 3,
                weight: 11.0 // kg
            }
        ];

        function calculateTotalWeight() {
            return cartItems.reduce((total, item) => {
                return total + (item.weight * item.quantity);
            }, 0);
        }

        function calculateSubtotal() {
            return cartItems.reduce((total, item) => {
                return total + (item.price * item.quantity);
            }, 0);
        }

        function renderCartItems() {
            const container = document.getElementById('cart-items');
            container.innerHTML = '';
            
            cartItems.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'cart-item';
                itemDiv.innerHTML = `
                    <div class="product-row">
                        <div>
                            <strong>${item.nameAr}</strong><br>
                            <small>${item.name}</small>
                        </div>
                        <div style="text-align: left;">
                            <div>ØªØ¹Ø¯Ø§Ø¯: ${item.quantity}</div>
                            <div>ÙˆØ²Ù† Ù‡Ø± ÙˆØ§Ø­Ø¯: ${item.weight} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</div>
                            <div><strong>ÙˆØ²Ù† Ú©Ù„: ${(item.weight * item.quantity).toFixed(2)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</strong></div>
                        </div>
                    </div>
                `;
                container.appendChild(itemDiv);
            });
        }

        function renderWeightBreakdown() {
            const container = document.getElementById('weight-breakdown');
            let breakdown = '';
            let totalWeight = 0;
            
            cartItems.forEach(item => {
                const itemWeight = item.weight * item.quantity;
                totalWeight += itemWeight;
                breakdown += `<div>${item.nameAr}: ${item.weight} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù… Ã— ${item.quantity} = ${itemWeight.toFixed(2)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</div>`;
            });
            
            breakdown += `<div style="border-top: 1px solid #ccc; margin-top: 8px; padding-top: 8px; font-weight: bold;">Ù…Ø¬Ù…ÙˆØ¹ ÙˆØ²Ù†: ${totalWeight.toFixed(2)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…</div>`;
            container.innerHTML = breakdown;
        }

        function updateTotalWeight() {
            const totalWeight = calculateTotalWeight();
            document.getElementById('total-weight').textContent = `${totalWeight.toFixed(2)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…`;
        }

        function updateSubtotal() {
            const subtotal = calculateSubtotal();
            document.getElementById('subtotal').textContent = `${subtotal.toFixed(2)} IQD`;
            document.getElementById('final-total').textContent = `${subtotal.toFixed(2)} IQD`;
        }

        // Handle delivery method selection
        document.getElementById('delivery-method').addEventListener('change', function() {
            const deliveryInfo = document.getElementById('delivery-info');
            const selectedValue = this.value;
            
            if (selectedValue === 'smart_vehicle') {
                deliveryInfo.style.display = 'block';
                deliveryInfo.style.backgroundColor = '#d1fae5';
                deliveryInfo.style.borderColor = '#10b981';
                deliveryInfo.innerHTML = `
                    <div style="color: #047857; font-weight: bold;">ğŸšš Ø§Ù†ØªØ®Ø§Ø¨ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø®ÙˆØ¯Ø±Ùˆ: Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¯Ø± Ù…Ø±Ø­Ù„Ù‡ Ø¨Ø¹Ø¯</div>
                    <div style="font-size: 12px; color: #065f46; margin-top: 5px;">
                        âœ“ Ø³ÛŒØ³ØªÙ… Ø¨Ù‡ØªØ±ÛŒÙ† Ø®ÙˆØ¯Ø±Ùˆ Ø±Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ ÙˆØ²Ù† Ù…Ø­Ù…ÙˆÙ„Ù‡ (${calculateTotalWeight().toFixed(2)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…)ØŒ Ù…Ù‚ØµØ¯ Ùˆ Ú©Ù…ØªØ±ÛŒÙ† Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÛŒâ€ŒÚ©Ù†Ø¯
                    </div>
                `;
            } else if (selectedValue === 'self_pickup') {
                deliveryInfo.style.display = 'block';
                deliveryInfo.style.backgroundColor = '#dbeafe';
                deliveryInfo.style.borderColor = '#3b82f6';
                deliveryInfo.innerHTML = `
                    <div style="color: #1d4ed8; font-weight: bold;">ğŸš¶â€â™‚ï¸ Ø­Ù…Ù„ ØªÙˆØ³Ø· Ø®ÙˆØ¯Ù… - Ø±Ø§ÛŒÚ¯Ø§Ù†</div>
                    <div style="font-size: 12px; color: #1e40af; margin-top: 5px;">
                        âœ“ Ø´Ù…Ø§ Ø®ÙˆØ¯ØªØ§Ù† Ú©Ø§Ù„Ø§ Ø±Ø§ Ø§Ø² Ù…Ø­Ù„ Ø´Ø±Ú©Øª ØªØ­ÙˆÛŒÙ„ Ø®ÙˆØ§Ù‡ÛŒØ¯ Ú¯Ø±ÙØª - Ø¨Ø¯ÙˆÙ† Ù‡Ø²ÛŒÙ†Ù‡ Ø­Ù…Ù„
                        <br>ÙˆØ²Ù† Ù…Ø­Ù…ÙˆÙ„Ù‡: ${calculateTotalWeight().toFixed(2)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…
                    </div>
                `;
            } else if (selectedValue === 'standard') {
                deliveryInfo.style.display = 'block';
                deliveryInfo.style.backgroundColor = '#f0f8ff';
                deliveryInfo.style.borderColor = '#b3d9ff';
                deliveryInfo.innerHTML = `
                    <div style="color: #1e40af; font-weight: bold;">ğŸš› Ø§Ø±Ø³Ø§Ù„ Ø¹Ø§Ø¯ÛŒ</div>
                    <div style="font-size: 12px; color: #1e40af; margin-top: 5px;">
                        Ù‡Ø²ÛŒÙ†Ù‡ Ø§Ø±Ø³Ø§Ù„: 5000 IQD | ÙˆØ²Ù† Ù…Ø­Ù…ÙˆÙ„Ù‡: ${calculateTotalWeight().toFixed(2)} Ú©ÛŒÙ„ÙˆÚ¯Ø±Ù…
                    </div>
                `;
            } else {
                deliveryInfo.style.display = 'none';
            }
        });

        // Initialize the page
        renderCartItems();
        renderWeightBreakdown();
        updateTotalWeight();
        updateSubtotal();
        
        console.log('Test results:');
        console.log('Total weight:', calculateTotalWeight().toFixed(2), 'kg');
        console.log('Subtotal:', calculateSubtotal().toFixed(2), 'IQD');
        console.log('Cart items:', cartItems);
    </script>
</body>
</html>