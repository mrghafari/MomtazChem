<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تست ادغام اطلاعات بانکی دینامیک</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; direction: rtl; }
        .container { max-width: 800px; margin: 0 auto; }
        .test-section { margin-bottom: 30px; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        .warning { background-color: #fff3cd; border-color: #ffeaa7; }
        h1 { color: #2c3e50; text-align: center; }
        h2 { color: #34495e; }
        p { line-height: 1.6; }
        .api-path { font-family: monospace; background: #f8f9fa; padding: 4px 8px; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>🏦 تست ادغام اطلاعات بانکی دینامیک</h1>
        <p style="text-align: center; color: #666;">آزمایش عملکرد ادغام اطلاعات بانکی از ماژول Company Information به فرم‌های پرداخت</p>

        <!-- Test Section 1: Bank Receipt Upload Page -->
        <div class="test-section success">
            <h2>✅ صفحه آپلود رسید بانکی (Bank Receipt Upload)</h2>
            <p><strong>مسیر:</strong> <span class="api-path">/bank-receipt-upload</span></p>
            <p><strong>تغییرات انجام شده:</strong></p>
            <ul>
                <li>✅ حذف اطلاعات بانکی هاردکد شده</li>
                <li>✅ اضافه کردن API call برای دریافت اطلاعات شرکت</li>
                <li>✅ نمایش دینامیک نام بانک از <code>companyInfo.bankName</code></li>
                <li>✅ نمایش دینامیک شماره حساب از <code>companyInfo.bankAccount</code></li>
                <li>✅ نمایش دینامیک IBAN از <code>companyInfo.bankIban</code></li>
                <li>✅ نمایش دینامیک کد SWIFT از <code>companyInfo.bankSwift</code></li>
                <li>✅ نمایش نام صاحب حساب از نام شرکت</li>
                <li>✅ Loading state برای زمان بارگذاری اطلاعات</li>
                <li>✅ Fallback values برای زمان عدم دسترسی به اطلاعات</li>
            </ul>
            <p><strong>API Endpoint:</strong> <span class="api-path">GET /api/admin/company-information</span></p>
        </div>

        <!-- Test Section 2: Customer Wallet Page -->
        <div class="test-section success">
            <h2>✅ صفحه کیف پول مشتری (Customer Wallet)</h2>
            <p><strong>مسیر:</strong> <span class="api-path">/customer/wallet</span></p>
            <p><strong>تغییرات انجام شده:</strong></p>
            <ul>
                <li>✅ اضافه کردن import برای <code>Building2</code> icon</li>
                <li>✅ اضافه کردن API call برای دریافت اطلاعات شرکت</li>
                <li>✅ ایجاد کارد اطلاعات بانکی در بخش Bank Transfer</li>
                <li>✅ نمایش دینامیک اطلاعات بانکی فقط زمان انتخاب "bank_transfer"</li>
                <li>✅ طراحی responsive با grid layout دو ستونه</li>
                <li>✅ نمایش loading state</li>
                <li>✅ نمایش fallback values</li>
                <li>✅ رنگ‌بندی آبی برای کارد اطلاعات بانکی</li>
            </ul>
            <p><strong>API Endpoint:</strong> <span class="api-path">GET /api/admin/company-information</span></p>
        </div>

        <!-- Test Section 3: Company Information Module -->
        <div class="test-section info">
            <h2>ℹ️ ماژول اطلاعات شرکت (Company Information)</h2>
            <p><strong>مسیر:</strong> <span class="api-path">/admin/company-information</span></p>
            <p><strong>فیلدهای بانکی موجود:</strong></p>
            <ul>
                <li><code>bankName</code> - نام بانک</li>
                <li><code>bankAccount</code> - شماره حساب</li>
                <li><code>bankIban</code> - شماره IBAN</li>
                <li><code>bankSwift</code> - کد SWIFT</li>
            </ul>
            <p><strong>تنظیمات:</strong> Manual Save System فعال - تغییرات فقط با کلیک دکمه "ذخیره اطلاعات شرکت" ذخیره می‌شوند</p>
        </div>

        <!-- Test Section 4: Schema Integration -->
        <div class="test-section info">
            <h2>🔗 ادغام Schema</h2>
            <p><strong>فایل Schema:</strong> <span class="api-path">shared/schema.ts</span></p>
            <p><strong>جدول:</strong> <code>companyInformation</code></p>
            <p><strong>فیلدهای بانکی:</strong></p>
            <ul>
                <li><code>bankName: text('bank_name')</code></li>
                <li><code>bankAccount: text('bank_account')</code></li>
                <li><code>bankIban: text('bank_iban')</code></li>
                <li><code>bankSwift: text('bank_swift')</code></li>
            </ul>
        </div>

        <!-- Test Section 5: Next Steps -->
        <div class="test-section warning">
            <h2>⚠️ گام‌های بعدی</h2>
            <p><strong>برای تکمیل تست:</strong></p>
            <ol>
                <li>ورود به پنل مدیریت از طریق <span class="api-path">/admin</span></li>
                <li>رفتن به بخش "اطلاعات شرکت"</li>
                <li>تکمیل اطلاعات بانکی (نام بانک، شماره حساب، IBAN، SWIFT)</li>
                <li>ذخیره اطلاعات با کلیک دکمه "ذخیره اطلاعات شرکت"</li>
                <li>تست صفحه آپلود رسید بانکی</li>
                <li>تست صفحه کیف پول مشتری با انتخاب گزینه "bank_transfer"</li>
            </ol>
        </div>

        <!-- Test Results -->
        <div class="test-section">
            <h2>📊 نتایج تست</h2>
            <p><strong>وضعیت کلی:</strong> ✅ ادغام کامل شده</p>
            <p><strong>فایل‌های تغییر یافته:</strong></p>
            <ul>
                <li><code>client/src/pages/bank-receipt-upload.tsx</code> - اطلاعات بانکی دینامیک</li>
                <li><code>client/src/pages/customer-wallet.tsx</code> - کارد اطلاعات بانکی در bank transfer</li>
            </ul>
            <p><strong>API Calls:</strong> <span class="api-path">GET /api/admin/company-information</span></p>
            <p><strong>Fallback Strategy:</strong> نمایش مقادیر پیش‌فرض در صورت عدم دسترسی به اطلاعات</p>
        </div>
    </div>
</body>
</html>