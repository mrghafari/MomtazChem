bilingual-purchase-form.tsx:2438 🔘 [BUTTON DEBUG] Submit button clicked - drag protection active
bilingual-purchase-form.tsx:2439 🔘 [BUTTON DEBUG] Mutation pending: false
bilingual-purchase-form.tsx:2440 🔘 [BUTTON DEBUG] Form valid: false
bilingual-purchase-form.tsx:2441 🔘 [BUTTON DEBUG] Form errors: {}
bilingual-purchase-form.tsx:2442 🔘 [BUTTON DEBUG] Selected shipping method: 32
bilingual-purchase-form.tsx:2443 🔘 [BUTTON DEBUG] Payment method: wallet_combined
bilingual-purchase-form.tsx:2447 🔘 [BUTTON DEBUG] Forcing form submission via handleSubmit
bilingual-purchase-form.tsx:1347 🚀 [SUBMIT DEBUG] onSubmit function called
bilingual-purchase-form.tsx:1348 🚀 [SUBMIT DEBUG] Form data received: {customerName: 'Omid Mohammad', phone: '+9647503533769', address: 'NAGwer Road, Qaryataq Village, Erbil, Iraq', city: 'Erbil', country: 'Iraq', …}
bilingual-purchase-form.tsx:1349 🚀 [SUBMIT DEBUG] Selected shipping method: 32
bilingual-purchase-form.tsx:1350 🚀 [SUBMIT DEBUG] Payment method: wallet_combined
bilingual-purchase-form.tsx:1351 🚀 [SUBMIT DEBUG] Form validation state: {defaultValues: {…}, …}
bilingual-purchase-form.tsx:1352 🚀 [SUBMIT DEBUG] Form errors: {}
bilingual-purchase-form.tsx:1353 🚀 [SUBMIT DEBUG] Mutation pending before submit: false
bilingual-purchase-form.tsx:1420 🚚 [DELIVERY LOGIC] Active delivery information: {activeAddress: 'NAGwer Road, Qaryataq Village, Erbil, Iraq', activeCity: 'Erbil', activeProvince: 'Erbil', activePostalCode: '44001', activePhone: '+9647503533769', …}
bilingual-purchase-form.tsx:1426 🔍 [PAYMENT ANALYSIS] Before conversion: {paymentMethod: 'wallet_combined', walletAmount: 1000, totalAmount: 11650, walletBalance: 50000000, canUseWallet: true, …}
bilingual-purchase-form.tsx:1441 🔄 [PAYMENT CONVERSION] wallet_combined → wallet (insufficient balance)
bilingual-purchase-form.tsx:1465 🚀 [ORDER SUBMIT] Submitting order with complete data: {endpoint: '/api/customers/orders', originalPaymentMethod: 'wallet_combined', finalPaymentMethod: 'wallet', totalAmount: 11650, walletBalance: 50000000, …}
bilingual-purchase-form.tsx:883 💰 [PURCHASE FORM] Tax calculation: {vatData: {…}, vatRate: 0.1, dutiesRate: 0, subtotalAmount: 1500, vatAmount: 150, …}
bilingual-purchase-form.tsx:913 💰 [TOTAL CALCULATION] Breakdown: {subtotalAmount: 1500, totalTaxAmount: 150, finalShippingCost: 10000, regularShippingCost: 0, smartDeliveryCost: 10000, …}
bilingual-purchase-form.tsx:951 💳 [WALLET DEBUG] Complete wallet analysis: {walletData: {…}, walletBalance: 50000000, canUseWallet: true, totalAmount: 11650, existingCustomer: true, …}
bilingual-purchase-form.tsx:883 💰 [PURCHASE FORM] Tax calculation: {vatData: {…}, vatRate: 0.1, dutiesRate: 0, subtotalAmount: 1500, vatAmount: 150, …}
bilingual-purchase-form.tsx:913 💰 [TOTAL CALCULATION] Breakdown: {subtotalAmount: 1500, totalTaxAmount: 150, finalShippingCost: 10000, regularShippingCost: 0, smartDeliveryCost: 10000, …}
bilingual-purchase-form.tsx:951 💳 [WALLET DEBUG] Complete wallet analysis: {walletData: {…}, walletBalance: 50000000, canUseWallet: true, totalAmount: 11650, existingCustomer: true, …}
bilingual-purchase-form.tsx:1138 🚀 [ORDER CREATION] Creating order with payment method: wallet
queryClient.ts:54  POST https://861926f6-85c5-4e93-bb9b-7e1a3d8bd878-00-2majci4octycm.picard.replit.dev/api/customers/orders?t=1754677547048 400 (Bad Request)
apiRequest @ queryClient.ts:54
mutationFn @ bilingual-purchase-form.tsx:1179
fn @ @tanstack_react-query.js?v=569e559a:1189
run @ @tanstack_react-query.js?v=569e559a:494
start @ @tanstack_react-query.js?v=569e559a:536
execute @ @tanstack_react-query.js?v=569e559a:1225
await in execute
mutate @ @tanstack_react-query.js?v=569e559a:2630
(anonymous) @ @tanstack_react-query.js?v=569e559a:3295
onSubmit @ bilingual-purchase-form.tsx:1481
(anonymous) @ chunk-4BFJKWC4.js?v=569e559a:1465
await in (anonymous)
onClick @ bilingual-purchase-form.tsx:2448
callCallback2 @ chunk-RPCDYKBN.js?v=569e559a:3674
invokeGuardedCallbackDev @ chunk-RPCDYKBN.js?v=569e559a:3699
invokeGuardedCallback @ chunk-RPCDYKBN.js?v=569e559a:3733
invokeGuardedCallbackAndCatchFirstError @ chunk-RPCDYKBN.js?v=569e559a:3736
executeDispatch @ chunk-RPCDYKBN.js?v=569e559a:7014
processDispatchQueueItemsInOrder @ chunk-RPCDYKBN.js?v=569e559a:7034
processDispatchQueue @ chunk-RPCDYKBN.js?v=569e559a:7043
dispatchEventsForPlugins @ chunk-RPCDYKBN.js?v=569e559a:7051
(anonymous) @ chunk-RPCDYKBN.js?v=569e559a:7174
batchedUpdates$1 @ chunk-RPCDYKBN.js?v=569e559a:18913
batchedUpdates @ chunk-RPCDYKBN.js?v=569e559a:3579
dispatchEventForPluginEventSystem @ chunk-RPCDYKBN.js?v=569e559a:7173
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-RPCDYKBN.js?v=569e559a:5478
dispatchEvent @ chunk-RPCDYKBN.js?v=569e559a:5472
dispatchDiscreteEvent @ chunk-RPCDYKBN.js?v=569e559a:5449
bilingual-purchase-form.tsx:1333 ❌ [ORDER ERROR] Order submission failed: Error: 400: {"success":false,"message":"روش پرداخت wallet پشتیبانی نمی‌شود","error":"UNSUPPORTED_PAYMENT_METHOD"}
    at throwIfResNotOk (queryClient.ts:41:13)
    at async apiRequest (queryClient.ts:63:5)
    at async Object.mutationFn (bilingual-purchase-form.tsx:1179:26)
onError @ bilingual-purchase-form.tsx:1333
execute @ @tanstack_react-query.js?v=569e559a:1254
await in execute
mutate @ @tanstack_react-query.js?v=569e559a:2630
(anonymous) @ @tanstack_react-query.js?v=569e559a:3295
onSubmit @ bilingual-purchase-form.tsx:1481
(anonymous) @ chunk-4BFJKWC4.js?v=569e559a:1465
await in (anonymous)
onClick @ bilingual-purchase-form.tsx:2448
callCallback2 @ chunk-RPCDYKBN.js?v=569e559a:3674
invokeGuardedCallbackDev @ chunk-RPCDYKBN.js?v=569e559a:3699
invokeGuardedCallback @ chunk-RPCDYKBN.js?v=569e559a:3733
invokeGuardedCallbackAndCatchFirstError @ chunk-RPCDYKBN.js?v=569e559a:3736
executeDispatch @ chunk-RPCDYKBN.js?v=569e559a:7014
processDispatchQueueItemsInOrder @ chunk-RPCDYKBN.js?v=569e559a:7034
processDispatchQueue @ chunk-RPCDYKBN.js?v=569e559a:7043
dispatchEventsForPlugins @ chunk-RPCDYKBN.js?v=569e559a:7051
(anonymous) @ chunk-RPCDYKBN.js?v=569e559a:7174
batchedUpdates$1 @ chunk-RPCDYKBN.js?v=569e559a:18913
batchedUpdates @ chunk-RPCDYKBN.js?v=569e559a:3579
dispatchEventForPluginEventSystem @ chunk-RPCDYKBN.js?v=569e559a:7173
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-RPCDYKBN.js?v=569e559a:5478
dispatchEvent @ chunk-RPCDYKBN.js?v=569e559a:5472
dispatchDiscreteEvent @ chunk-RPCDYKBN.js?v=569e559a:5449
shop.tsx:211 🎛️ [FRONTEND CONTROLS] Loaded: {success: true, data: {…}}
shop.tsx:212 🎛️ [VISIBILITY] Discount Banner: true AI Features: false
shop.tsx:236 🌟 [RATINGS DEBUG] Product stats loaded: 7 products with ratings
shop.tsx:237 🌟 [RATINGS DEBUG] Product stats data: {1: {…}, 25: {…}, 470: {…}, 472: {…}, 474: {…}, 475: {…}, 477: {…}}
shop.tsx:241 🌟 [RATINGS DEBUG] Current products: (4) [{…}, {…}, {…}, {…}]
shop.tsx:242 🌟 [RATINGS DEBUG] Products with ratings: (3) [{…}, {…}, {…}]
bilingual-purchase-form.tsx:883 💰 [PURCHASE FORM] Tax calculation: {vatData: {…}, vatRate: 0.1, dutiesRate: 0, subtotalAmount: 1500, vatAmount: 150, …}
bilingual-purchase-form.tsx:913 💰 [TOTAL CALCULATION] Breakdown: {subtotalAmount: 1500, totalTaxAmount: 150, finalShippingCost: 10000, regularShippingCost: 0, smartDeliveryCost: 10000, …}
bilingual-purchase-form.tsx:951 💳 [WALLET DEBUG] Complete wallet analysis: {walletData: {…}, walletBalance: 50000000, canUseWallet: true, totalAmount: 11650, existingCustomer: true, …}
useAuth.ts:30  GET https://861926f6-85c5-4e93-bb9b-7e1a3d8bd878-00-2majci4octycm.picard.replit.dev/api/admin/me 403 (Forbidden)
queryFn @ useAuth.ts:30
fetchFn @ @tanstack_react-query.js?v=569e559a:840
run @ @tanstack_react-query.js?v=569e559a:494
start @ @tanstack_react-query.js?v=569e559a:536
fetch @ @tanstack_react-query.js?v=569e559a:926
executeFetch_fn @ @tanstack_react-query.js?v=569e559a:2211
(anonymous) @ @tanstack_react-query.js?v=569e559a:2245
setInterval
updateRefetchInterval_fn @ @tanstack_react-query.js?v=569e559a:2243
updateTimers_fn @ @tanstack_react-query.js?v=569e559a:2250
onQueryUpdate @ @tanstack_react-query.js?v=569e559a:2206
(anonymous) @ @tanstack_react-query.js?v=569e559a:998
(anonymous) @ @tanstack_react-query.js?v=569e559a:997
batch @ @tanstack_react-query.js?v=569e559a:583
dispatch_fn @ @tanstack_react-query.js?v=569e559a:996
setData @ @tanstack_react-query.js?v=569e559a:696
onSuccess @ @tanstack_react-query.js?v=569e559a:897
resolve @ @tanstack_react-query.js?v=569e559a:456
Promise.then
run @ @tanstack_react-query.js?v=569e559a:498
start @ @tanstack_react-query.js?v=569e559a:536
fetch @ @tanstack_react-query.js?v=569e559a:926
executeFetch_fn @ @tanstack_react-query.js?v=569e559a:2211
fetch @ @tanstack_react-query.js?v=569e559a:2011
refetch @ @tanstack_react-query.js?v=569e559a:2001
onFocus @ @tanstack_react-query.js?v=569e559a:749
(anonymous) @ @tanstack_react-query.js?v=569e559a:1112
(anonymous) @ @tanstack_react-query.js?v=569e559a:1111
batch @ @tanstack_react-query.js?v=569e559a:583
onFocus @ @tanstack_react-query.js?v=569e559a:1110
(anonymous) @ @tanstack_react-query.js?v=569e559a:1601
await in (anonymous)
(anonymous) @ @tanstack_react-query.js?v=569e559a:313
onFocus @ @tanstack_react-query.js?v=569e559a:312
(anonymous) @ @tanstack_react-query.js?v=569e559a:299
listener @ @tanstack_react-query.js?v=569e559a:270
useAuth.ts:46 Auth check failed: Error: HTTP 403
    at queryFn (useAuth.ts:39:17)
queryFn @ useAuth.ts:46
await in queryFn
fetchFn @ @tanstack_react-query.js?v=569e559a:840
run @ @tanstack_react-query.js?v=569e559a:494
start @ @tanstack_react-query.js?v=569e559a:536
fetch @ @tanstack_react-query.js?v=569e559a:926
executeFetch_fn @ @tanstack_react-query.js?v=569e559a:2211
(anonymous) @ @tanstack_react-query.js?v=569e559a:2245
setInterval
updateRefetchInterval_fn @ @tanstack_react-query.js?v=569e559a:2243
updateTimers_fn @ @tanstack_react-query.js?v=569e559a:2250
onQueryUpdate @ @tanstack_react-query.js?v=569e559a:2206
(anonymous) @ @tanstack_react-query.js?v=569e559a:998
(anonymous) @ @tanstack_react-query.js?v=569e559a:997
batch @ @tanstack_react-query.js?v=569e559a:583
dispatch_fn @ @tanstack_react-query.js?v=569e559a:996
setData @ @tanstack_react-query.js?v=569e559a:696
onSuccess @ @tanstack_react-query.js?v=569e559a:897
resolve @ @tanstack_react-query.js?v=569e559a:456
Promise.then
run @ @tanstack_react-query.js?v=569e559a:498
start @ @tanstack_react-query.js?v=569e559a:536
fetch @ @tanstack_react-query.js?v=569e559a:926
executeFetch_fn @ @tanstack_react-query.js?v=569e559a:2211
fetch @ @tanstack_react-query.js?v=569e559a:2011
refetch @ @tanstack_react-query.js?v=569e559a:2001
onFocus @ @tanstack_react-query.js?v=569e559a:749
(anonymous) @ @tanstack_react-query.js?v=569e559a:1112
(anonymous) @ @tanstack_react-query.js?v=569e559a:1111
batch @ @tanstack_react-query.js?v=569e559a:583
onFocus @ @tanstack_react-query.js?v=569e559a:1110
(anonymous) @ @tanstack_react-query.js?v=569e559a:1601
await in (anonymous)
(anonymous) @ @tanstack_react-query.js?v=569e559a:313
onFocus @ @tanstack_react-query.js?v=569e559a:312
(anonymous) @ @tanstack_react-query.js?v=569e559a:299
listener @ @tanstack_react-query.js?v=569e559a:270
useCustomerAuth.ts:26 Customer auth check result: {success: true, customer: {…}}
