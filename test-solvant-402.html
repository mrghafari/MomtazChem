<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ø³ÛŒØ³ØªÙ… Ø§ÛŒÙ…Ù†ÛŒ Solvant 402</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .test-card { border: 2px solid #ddd; margin: 15px 0; padding: 20px; border-radius: 10px; }
        .safe { border-color: #28a745; background-color: #d4edda; }
        .dangerous { border-color: #dc3545; background-color: #f8d7da; }
        .flammable { border-color: #fd7e14; background-color: #fff3cd; }
        h1 { color: #333; text-align: center; }
        button { padding: 12px 25px; margin: 8px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; }
        .test-btn { background-color: #007bff; color: white; }
        .result { margin: 15px 0; padding: 15px; border-radius: 5px; background-color: #f8f9fa; }
        .success { background-color: #d4edda; color: #155724; }
        .danger { background-color: #f8d7da; color: #721c24; }
        .warning { background-color: #fff3cd; color: #856404; }
        .code { font-family: monospace; background: #e9ecef; padding: 2px 4px; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>ğŸ§ª ØªØ³Øª Ø³ÛŒØ³ØªÙ… Ø§ÛŒÙ…Ù†ÛŒ Solvant 402</h1>
    
    <div class="test-card safe">
        <h3>âœ… Ù…Ø­ØµÙˆÙ„ 25 - Solvant 402 (ØºÛŒØ± Ø¢ØªØ´â€ŒØ²Ø§)</h3>
        <p><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> Ø§ÛŒÙ…Ù† Ø¨Ø±Ø§ÛŒ Ø­Ù…Ù„ Ø¨Ø§ Ø§ØªÙˆØ¨ÙˆØ³</p>
        <p><strong>Ø§Ù†ØªØ¸Ø§Ø±:</strong> Ø§ØªÙˆØ¨ÙˆØ³ Ø¨Ø§ÛŒØ¯ Ø§Ù†ØªØ®Ø§Ø¨ Ø´ÙˆØ¯</p>
        <button class="test-btn" onclick="testProduct(25)">ØªØ³Øª Ù…Ø­ØµÙˆÙ„ 25</button>
        <div id="result-25" class="result" style="display:none;"></div>
    </div>

    <div class="test-card safe">
        <h3>âœ… Ù…Ø­ØµÙˆÙ„ 27 - Solvant 402 (ØºÛŒØ± Ø¢ØªØ´â€ŒØ²Ø§)</h3>
        <p><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> Ø§ÛŒÙ…Ù† Ø¨Ø±Ø§ÛŒ Ø­Ù…Ù„ Ø¨Ø§ Ø§ØªÙˆØ¨ÙˆØ³</p>
        <p><strong>Ø§Ù†ØªØ¸Ø§Ø±:</strong> Ø§ØªÙˆØ¨ÙˆØ³ Ø¨Ø§ÛŒØ¯ Ø§Ù†ØªØ®Ø§Ø¨ Ø´ÙˆØ¯</p>
        <button class="test-btn" onclick="testProduct(27)">ØªØ³Øª Ù…Ø­ØµÙˆÙ„ 27</button>
        <div id="result-27" class="result" style="display:none;"></div>
    </div>

    <div class="test-card dangerous">
        <h3>ğŸ”¥ Ù…Ø­ØµÙˆÙ„ 28 - Solvant 402 (Ø¢ØªØ´â€ŒØ²Ø§)</h3>
        <p><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> Ø®Ø·Ø±Ù†Ø§Ú© - Ù†ÛŒØ§Ø² Ø¨Ù‡ ÙˆØ³ÛŒÙ„Ù‡ Ù…Ø®ØµÙˆØµ</p>
        <p><strong>Ø§Ù†ØªØ¸Ø§Ø±:</strong> Ø§ØªÙˆØ¨ÙˆØ³ Ù…Ù…Ù†ÙˆØ¹ â†’ Ú©Ø§Ù…ÛŒÙˆÙ† Ù…Ø¬Ø§Ø² Ø¢ØªØ´â€ŒØ²Ø§</p>
        <button class="test-btn" onclick="testProduct(28)" style="background-color: #dc3545;">âš ï¸ ØªØ³Øª Ù…Ø­ØµÙˆÙ„ 28 (Ø¢ØªØ´â€ŒØ²Ø§)</button>
        <div id="result-28" class="result" style="display:none;"></div>
    </div>

    <div class="test-card flammable">
        <h3>âŒ Ù…Ø­ØµÙˆÙ„ 470 (ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯)</h3>
        <p><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> Ø§ÛŒÙ† Ø´Ù†Ø§Ø³Ù‡ Ø¯Ø± Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>
        <p><strong>Ù†ØªÛŒØ¬Ù‡:</strong> Ø³ÛŒØ³ØªÙ… Ù‡ÛŒÚ† Ù…Ø­ØµÙˆÙ„ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯ â†’ Ø§ØªÙˆØ¨ÙˆØ³ Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÛŒâ€ŒØ´ÙˆØ¯</p>
        <button class="test-btn" onclick="testProduct(470)" style="background-color: #ffc107; color: #000;">ØªØ³Øª Ù…Ø­ØµÙˆÙ„ 470 (ØºÛŒØ±Ù…ÙˆØ¬ÙˆØ¯)</button>
        <div id="result-470" class="result" style="display:none;"></div>
    </div>

    <div style="background-color: #e7f3ff; padding: 20px; margin: 20px 0; border-radius: 8px; border: 2px solid #007bff;">
        <h3>ğŸ“Š Ø®Ù„Ø§ØµÙ‡ Ù†ØªØ§ÛŒØ¬:</h3>
        <ul>
            <li><strong>Ù…Ø­ØµÙˆÙ„ 25:</strong> ØºÛŒØ± Ø¢ØªØ´â€ŒØ²Ø§ â†’ Ø§ØªÙˆØ¨ÙˆØ³ Ù…Ø¬Ø§Ø² âœ…</li>
            <li><strong>Ù…Ø­ØµÙˆÙ„ 27:</strong> ØºÛŒØ± Ø¢ØªØ´â€ŒØ²Ø§ â†’ Ø§ØªÙˆØ¨ÙˆØ³ Ù…Ø¬Ø§Ø² âœ…</li>
            <li><strong>Ù…Ø­ØµÙˆÙ„ 28:</strong> Ø¢ØªØ´â€ŒØ²Ø§ â†’ Ú©Ø§Ù…ÛŒÙˆÙ† Ù…Ø¬Ø§Ø² Ø¢ØªØ´â€ŒØ²Ø§ âœ…</li>
            <li><strong>Ù…Ø­ØµÙˆÙ„ 470:</strong> ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯ â†’ Ø§ØªÙˆØ¨ÙˆØ³ (Ø·Ø¨ÛŒØ¹ÛŒ) âœ…</li>
        </ul>
        <p><strong style="color: #dc3545;">âš ï¸ Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ø³ÛŒØ³ØªÙ… Ø§ÛŒÙ…Ù†ÛŒ Ø§Ø² Ù…Ø­ØµÙˆÙ„ 28 Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯!</strong></p>
    </div>

    <script>
        async function testProduct(productId) {
            const resultDiv = document.getElementById('result-' + productId);
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = 'ğŸ”„ Ø¯Ø± Ø­Ø§Ù„ ØªØ³Øª...';

            try {
                const response = await fetch('/api/calculate-delivery-cost', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        weight: 11,
                        destinationCity: 'Ú©Ø±Ø¨Ù„Ø§',
                        destinationProvince: 'Ú©Ø±Ø¨Ù„Ø§',
                        originCity: 'Ø§Ø±Ø¨ÛŒÙ„',
                        cart: { [productId]: 1 },
                        useSecondaryAddress: false
                    })
                });

                const data = await response.json();
                
                if (data.success) {
                    const vehicle = data.data.optimalVehicle;
                    const isFlammableAuthorized = vehicle.vehicleName.includes('Ù…Ø¬Ø§Ø² Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ§Ø¯ Ø¢ØªØ´â€ŒØ²Ø§');
                    const isBus = vehicle.vehicleName.includes('Ø§ØªÙˆØ¨ÙˆØ³');
                    
                    let statusClass = 'success';
                    let statusText = '';
                    
                    if (productId === 28) {
                        // Ù…Ø­ØµÙˆÙ„ Ø¢ØªØ´â€ŒØ²Ø§ - Ø¨Ø§ÛŒØ¯ Ú©Ø§Ù…ÛŒÙˆÙ† Ù…Ø¬Ø§Ø² Ø§Ù†ØªØ®Ø§Ø¨ Ø´ÙˆØ¯
                        if (isFlammableAuthorized) {
                            statusText = 'âœ… Ø¯Ø±Ø³Øª: Ú©Ø§Ù…ÛŒÙˆÙ† Ù…Ø¬Ø§Ø² Ø¢ØªØ´â€ŒØ²Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯';
                            statusClass = 'success';
                        } else {
                            statusText = 'âŒ Ø®Ø·Ø§: ÙˆØ³ÛŒÙ„Ù‡ ØºÛŒØ±Ù…Ø¬Ø§Ø² Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯!';
                            statusClass = 'danger';
                        }
                    } else {
                        // Ù…Ø­ØµÙˆÙ„Ø§Øª ØºÛŒØ± Ø¢ØªØ´â€ŒØ²Ø§ - Ø§ØªÙˆØ¨ÙˆØ³ Ù…Ø¬Ø§Ø² Ø§Ø³Øª
                        if (isBus || !isFlammableAuthorized) {
                            statusText = 'âœ… Ø¯Ø±Ø³Øª: ÙˆØ³ÛŒÙ„Ù‡ Ù…Ù†Ø§Ø³Ø¨ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯';
                            statusClass = 'success';
                        } else {
                            statusText = 'âš ï¸ Ø§Ø®Ø·Ø§Ø±: ÙˆØ³ÛŒÙ„Ù‡ Ø³Ù†Ú¯ÛŒÙ†â€ŒØªØ± Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯';
                            statusClass = 'warning';
                        }
                    }
                    
                    resultDiv.className = `result ${statusClass}`;
                    resultDiv.innerHTML = `
                        <h4>Ù†ØªÛŒØ¬Ù‡ ØªØ³Øª Ù…Ø­ØµÙˆÙ„ ${productId}:</h4>
                        <p><strong>ÙˆØ³ÛŒÙ„Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ:</strong> <span class="code">${vehicle.vehicleName}</span></p>
                        <p><strong>Ù‡Ø²ÛŒÙ†Ù‡:</strong> ${vehicle.totalCost.toLocaleString()} Ø¯ÛŒÙ†Ø§Ø±</p>
                        <p><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> ${statusText}</p>
                    `;
                } else {
                    resultDiv.className = 'result danger';
                    resultDiv.innerHTML = `<p>âŒ Ø®Ø·Ø§: ${data.message}</p>`;
                }
            } catch (error) {
                resultDiv.className = 'result danger';
                resultDiv.innerHTML = `<p>âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>